<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plotly Graph from JSON</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>

<h2>Select Trace Number to Plot</h2>
<input type="number" id="traceInput" placeholder="Enter trace number" min="0" max="9">
<button id="plotButton">Plot Graph</button>
<div id="myDiv" style="width: 100%; height: 100%;"></div>

<script>
// Function to fetch data and plot the graph
document.getElementById('plotButton').addEventListener('click', () => {
    const traceNumber = document.getElementById('traceInput').value; // Get user input
    const url = 'http://localhost:8000/data_by_id/'; // Replace with your actual API endpoint

    const user = {
        "id": 2
    };
    console.log(JSON.stringify(user))
    fetch(url, {
        mode: 'no-cors',
        method: "POST",
        headers: {
            "Content-type": "application/json; charset=UTF-8",
        },
        body: JSON.stringify(user) // Send the trace number in the request body
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        const selectedTrace = data; // Assuming the response directly returns the trace data

        if (selectedTrace) {
            const trace = {
                x: selectedTrace.x, // Adjust according to your JSON structure
                y: selectedTrace.y, // Adjust according to your JSON structure
                type: 'scatter', // Change this to 'bar', 'pie', etc., as needed
            };

            const layout = {
                title: `Graph for Trace 2`,
                xaxis: {
                    title: 'X-Axis Label'
                },
                yaxis: {
                    title: 'Y-Axis Label'
                }
            };

            Plotly.newPlot('myDiv', [trace], layout); // Render the graph
        } else {
            alert('Trace not found!');
        }
    })
    .catch(error => console.error('Error fetching the JSON:', error));
});
</script>

</body>
</html>